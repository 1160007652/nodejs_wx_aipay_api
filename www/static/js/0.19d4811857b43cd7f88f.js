webpackJsonp([0],{"F/F3":function(a,e){},QICC:function(a,e){},RcPq:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{order_id:this.$route.params.orderid,orderData:[],minutes:0,seconds:0,mainShow:!1,timer:"",expired:!0,device:"mobile",isWeixin:!1,pay_status:"",pay_ok:!1}},mounted:function(){if(this.getOrder(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){this.device="mobile";var a=navigator.userAgent.toLowerCase();this.isWeixin=-1!=a.indexOf("micromessenger")}else this.device="PC";this.init()},methods:{init:function(){this.pay_status=setInterval(this.getPayStatus,2e3)},getPayStatus:function(){var a=this;a.$axios({url:"/api/orderstatus",method:"get",params:{order_id:a.order_id}}).then(function(e){-1==e.data.code?(a.$message({type:"info",message:e.data.msg}),clearInterval(a.pay_status)):"已支付"==e.data.data.pay_status&&(clearInterval(a.pay_status),clearInterval(a.timer),a.pay_ok=!0)})},time:function(a){var e=this,t=a;e.timer=setInterval(function(){t>=0?(e.minutes=Math.floor(t/60)<10?"0"+Math.floor(t/60):Math.floor(t/60),e.seconds=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),--t):(e.expired=!1,clearInterval(e.timer),clearInterval(e.pay_status))},1e3)},getOrder:function(){var a=this,e=this;e.$axios({url:"/api/getorderid",method:"get",params:{order_id:e.order_id}}).then(function(t){if(-1==t.data.code)e.$message({type:"info",message:t.data.msg});else{e.orderData=t.data.data,a.mainShow=!0,a.time(t.data.time/1e3);new QRCode("img",{text:t.data.data.pay_qr,width:200,height:200,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}})}},watch:{$route:function(a,e){this.order_id=a.params.orderid,this.getOrder(),clearInterval(this.timer),clearInterval(this.pay_status)}}},r={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:a.mainShow,expression:"mainShow"}],staticClass:"container"},[t("div",{staticClass:"header"},[t("div",{class:[{logowechat:"wechat"==a.orderData.pay_type,logo:"alipay"==a.orderData.pay_type}]})]),a._v(" "),t("div",{staticClass:"mainbody"},[t("div",{staticClass:"realprice"},[a._v("￥"+a._s(a.orderData.pay_price))]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.orderData.order_price!=a.orderData.pay_price,expression:"orderData.order_price != orderData.pay_price"}],staticClass:"discountprice"},[t("del",[a._v("原价:￥"+a._s(a.orderData.order_price))]),a._v("，随机立减:￥"+a._s(Math.floor(100*(a.orderData.order_price-a.orderData.pay_price))/100))]),a._v(" "),t("div",{staticClass:"qrcode"},[t("div",{staticClass:"image",attrs:{id:"img"}}),a._v(" "),t("div",{class:["logo",{"logologo-alipay":"alipay"==a.orderData.pay_type,"hidden-xs":!0}]}),a._v(" "),t("div",{class:["expired",{hidden:1==a.expired}]}),a._v(" "),t("div",{class:["paid",{hidden:0==a.pay_ok}]})]),a._v(" "),t("div",{staticClass:"remainseconds"},[t("div",{staticClass:"time minutes"},[t("b",[a._v(a._s(a.minutes))]),a._v(" "),t("em",[a._v("分")])]),a._v(" "),t("div",{staticClass:"colon"},[a._v(":")]),a._v(" "),t("div",{staticClass:"time seconds"},[t("b",[a._v(a._s(a.seconds))]),a._v(" "),t("em",[a._v("秒")])])]),a._v(" "),t("div",{staticClass:"tips"},["mobile"==a.device?t("div",["alipay"!=a.orderData.pay_type?t("div",[1==a.isWeixin?t("div",[a._v("请长按二维码进行支付")]):t("div",[a._v("请截屏后打开"+a._s("alipay"!=a.orderData.pay_type?"微信":"支付宝")+",从相册选择二维码图片")])]):t("div",[0==a.isWeixin?t("div",[a._v("请截屏后，打开"+a._s("alipay"!=a.orderData.pay_type?"微信":"支付宝")+"，从相册选择二维码图片")]):t("div",[t("a",{staticClass:"btn btn-info btn-lg",attrs:{href:a.orderData.pay_qr}},[a._v("启动"+a._s("alipay"!=a.orderData.pay_type?"微信":"支付宝")+"进行支付")])])])]):t("div",[a._v("\n                打开"+a._s("alipay"!=a.orderData.pay_type?"微信":"支付宝")+"「扫一扫」\n            ")]),a._v(" "),t("div",{staticClass:"warning"},[a._v("识别后,请务必手动输入金额￥"+a._s(a.orderData.pay_price)+"元!")])])])])},staticRenderFns:[]};var s=t("C7Lr")(i,r,!1,function(a){t("F/F3"),t("QICC"),t("X+ds")},"data-v-0b84ea7e",null);e.default=s.exports},"X+ds":function(a,e){}});